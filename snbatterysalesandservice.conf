server {
    # Listen on port 80 for HTTP
    listen 80;
    server_name snbatterysalesandservice.com www.snbatterysalesandservice.com;

    # Redirect all HTTP traffic to HTTPS
    return 301 https://$host$request_uri;
}

server {
    # Listen on port 443 for HTTPS
    listen 443 ssl http2;
    server_name snbatterysalesandservice.com www.snbatterysalesandservice.com;

    # SSL Certificate and Key
    ssl_certificate /etc/nginx/ssl/snbatterysalesandservice.crt;
    ssl_certificate_key /etc/nginx/ssl/snbatterysalesandservice.key;

    # SSL Settings
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # Root Directory
    root /var/www/snbatterysalesandservice;
    index index.html index.htm index.php;

    # SEO-Friendly URL for Car Battery Replacement
    location /car-battery-replacement {
        try_files $uri /index.html;
    }

    # Error Handling
    error_page 404 /404.html;
    location = /404.html {
        root /var/www/snbatterysalesandservice;
    }

    # Redirect for Specific Page if Needed
    location = /bmw-x1-petrol-battery-price-replacement-bengaluru {
        return 301 https://snbatterysalesandservice.com/car-battery-replacement;
    }

    # Cache-Control for Static Files
    location ~* \.(jpg|jpeg|png|gif|css|js|ico|woff2?|eot|ttf|svg|webp)$ {
        expires 6M;
        access_log off;
    }

    # Default Location Block
    location / {
        try_files $uri $uri/ /index.html;
    }

    # PHP Support (if required)
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }

    # Deny Access to Hidden Files
    location ~ /\. {
        deny all;
    }

    # Security Headers
    add_header X-Content-Type-Options nosniff;
    add_header X-Frame-Options SAMEORIGIN;
    add_header X-XSS-Protection "1; mode=block";
}
